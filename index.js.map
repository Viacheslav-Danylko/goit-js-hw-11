{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export const BASE_URL = 'https://pixabay.com/api/';\nexport const API_KEY = '46290699-f987c2a4595ee60b837e9e9f4';\n\nexport function fetchImages(query) {\n  const params = new URLSearchParams({\n    key: API_KEY,\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: 'true'\n  });\n\n  return fetch(`${BASE_URL}?${params.toString()}`)\n    .then(response => {\n      if (!response.ok) {\n        throw new Error(response.status);\n      }\n\n      return response.json();\n    });\n}","export function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    const markup = images.hits.map((image) => { // Используем hits вместо queries\n        return `<li class=\"gallery-query\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-img\"\n                    src=\"${image.webformatURL}\"\n                    data-source=\"${image.largeImageURL}\"\n                    alt=\"${image.tags}\"\n                    width=\"360\"  onclick=\"return false\">\n                <ul class=\"gallery-descr\">\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Likes</p>\n                        <p class=\"gallery-value\">${image.likes}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Views</p>\n                        <p class=\"gallery-value\">${image.views}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Comments</p>\n                        <p class=\"gallery-value\">${image.comments}</p>\n                    </li>\n                    <li class=\"gallery-item\">\n                        <p class=\"gallery-item-descr\">Downloads</p>\n                        <p class=\"gallery-value\">${image.downloads}</p>\n                    </li>\n                </ul>\n            </a>\n        </li>`;\n    }).join('');\n    gallery.insertAdjacentHTML('beforeend', markup);\n};\n\nexport function showLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.remove('visually-hidden');\n};\n\nexport function hideLoader() {\n    const loader = document.querySelector('.loader');\n    loader.classList.add('visually-hidden');\n};","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\nimport { fetchImages } from './js/pixabay-api';\nimport { renderImages, showLoader, hideLoader } from './js/render-functions';\n\nconst form = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nlet lightbox = null;\n\n// Функція для показу повідомлення про помилки\nfunction showError(message) {\n  iziToast.error({\n    title: '',\n    message,\n    position: 'topRight',\n    backgroundColor: '#EF4040',\n    maxWidth: '432px',\n    messageColor: '#fff',\n    iconColor: '#fff'\n  });\n}\n\n// Функція для попереднього завантаження зображень\nfunction preloadImages(images) {\n  images.hits.forEach(image => {\n    const img = new Image();\n    img.src = image.largeImageURL;\n  });\n}\n\n// Основна логіка обробки події 'submit'\nform.addEventListener('submit', (event) => {\n  event.preventDefault();\n\n  const inputValue = form.elements.searchQuery.value.trim().toLowerCase(); // Очищення пробілів\n\n  if (inputValue === '') {\n    showError('Sorry, there are no images matching your search query. Please try again!');\n    return;\n  }\n\n  gallery.innerHTML = ''; // Очищення галереї\n\n  showLoader(); // Показуємо індикатор завантаження\n\n  fetchImages(inputValue)\n    .then(images => {\n      if (images.hits.length === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n        return;\n      }\n\n      renderImages(images); // Відображаємо зображення\n      preloadImages(images); // Попереднє завантаження зображень\n\n      if (!lightbox) {\n        lightbox = new SimpleLightbox('.gallery a', {\n          captionsData: 'alt',\n          captionPosition: 'bottom',\n          captionDelay: 250,\n        });\n      } else {\n        lightbox.refresh();\n      }\n    })\n    .catch(error => {\n      console.error(error);\n      showError('An error occurred while fetching images. Please try again.');\n    })\n    .finally(() => {\n      hideLoader(); // Приховуємо індикатор завантаження\n      form.reset(); // Очищуємо форму\n    });\n});"],"names":["BASE_URL","API_KEY","fetchImages","query","params","response","renderImages","images","gallery","markup","image","showLoader","hideLoader","form","lightbox","showError","message","iziToast","preloadImages","img","event","inputValue","SimpleLightbox","error"],"mappings":"6vBAAO,MAAMA,EAAW,2BACXC,EAAU,qCAEhB,SAASC,EAAYC,EAAO,CACjC,MAAMC,EAAS,IAAI,gBAAgB,CACjC,IAAKH,EACL,EAAGE,EACH,WAAY,QACZ,YAAa,aACb,WAAY,MAChB,CAAG,EAED,OAAO,MAAM,GAAGH,CAAQ,IAAII,EAAO,SAAU,CAAA,EAAE,EAC5C,KAAKC,GAAY,CAChB,GAAI,CAACA,EAAS,GACZ,MAAM,IAAI,MAAMA,EAAS,MAAM,EAGjC,OAAOA,EAAS,MACtB,CAAK,CACL,CCpBO,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAASF,EAAO,KAAK,IAAKG,GACrB;AAAA,4CAC6BA,EAAM,aAAa;AAAA;AAAA,2BAEpCA,EAAM,YAAY;AAAA,mCACVA,EAAM,aAAa;AAAA,2BAC3BA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,mDAKcA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mDAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,mDAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,mDAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,cAK7D,EAAE,KAAK,EAAE,EACVF,EAAQ,mBAAmB,YAAaC,CAAM,CAClD,CAEO,SAASE,GAAa,CACV,SAAS,cAAc,SAAS,EACxC,UAAU,OAAO,iBAAiB,CAC7C,CAEO,SAASC,GAAa,CACV,SAAS,cAAc,SAAS,EACxC,UAAU,IAAI,iBAAiB,CAC1C,CCnCA,MAAMC,EAAO,SAAS,cAAc,cAAc,EAC5CL,EAAU,SAAS,cAAc,UAAU,EACjD,IAAIM,EAAW,KAGf,SAASC,EAAUC,EAAS,CAC1BC,EAAS,MAAM,CACb,MAAO,GACP,QAAAD,EACA,SAAU,WACV,gBAAiB,UACjB,SAAU,QACV,aAAc,OACd,UAAW,MACf,CAAG,CACH,CAGA,SAASE,EAAcX,EAAQ,CAC7BA,EAAO,KAAK,QAAQG,GAAS,CAC3B,MAAMS,EAAM,IAAI,MAChBA,EAAI,IAAMT,EAAM,aACpB,CAAG,CACH,CAGAG,EAAK,iBAAiB,SAAWO,GAAU,CACzCA,EAAM,eAAc,EAEpB,MAAMC,EAAaR,EAAK,SAAS,YAAY,MAAM,KAAI,EAAG,cAE1D,GAAIQ,IAAe,GAAI,CACrBN,EAAU,0EAA0E,EACpF,MACD,CAEDP,EAAQ,UAAY,GAEpBG,IAEAT,EAAYmB,CAAU,EACnB,KAAKd,GAAU,CACd,GAAIA,EAAO,KAAK,SAAW,EAAG,CAC5BQ,EAAU,0EAA0E,EACpF,MACD,CAEDT,EAAaC,CAAM,EACnBW,EAAcX,CAAM,EAEfO,EAOHA,EAAS,QAAO,EANhBA,EAAW,IAAIQ,EAAe,aAAc,CAC1C,aAAc,MACd,gBAAiB,SACjB,aAAc,GACxB,CAAS,CAIT,CAAK,EACA,MAAMC,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBR,EAAU,4DAA4D,CAC5E,CAAK,EACA,QAAQ,IAAM,CACbH,IACAC,EAAK,MAAK,CAChB,CAAK,CACL,CAAC"}